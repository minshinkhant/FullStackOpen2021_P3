(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(14),a=n.n(c),r=(n(19),n(3)),o=n(2),i=n(0),d=function(e){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})})})},s=function(e){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("form",{onSubmit:e.addPerson,children:Object(i.jsx)("table",{children:Object(i.jsxs)("tbody",{children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:"name:"}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange})})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:"number:"}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})]})})})})},l=function(e){var t=e.filterPersons,n=e.deleteContact;return Object(i.jsxs)("table",{children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Number"})]})}),Object(i.jsx)("tbody",{children:t.map((function(e,t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.name}),Object(i.jsx)("td",{children:e.number}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"button",value:"delete",onClick:n(e.id,e.name)})})]},t)}))})]})},u=n(4),j=n.n(u),b="/api/persons",h={getAll:function(){return j.a.get(b).then((function(e){return e.data}))},create:function(e){return j.a.post(b,e).then((function(e){return e.data}))},update:function(e,t){return j.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},deleteContact:function(e,t){return function(){if(window.confirm("Do you want to delete ".concat(t))){var n=j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}));return window.location.reload(),n}return!1}}},O=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),u=Object(r.a)(a,2),j=u[0],b=u[1],O=Object(o.useState)(""),f=Object(r.a)(O,2),m=f[0],x=f[1],w=Object(o.useState)(""),g=Object(r.a)(w,2),p=g[0],v=g[1],C=Object(o.useState)(null),N=Object(r.a)(C,2),y=N[0],S=N[1],F=Object(o.useState)(null),k=Object(r.a)(F,2),P=k[0],A=k[1];Object(o.useEffect)((function(){h.getAll().then((function(e){return c(e)}))}),[]);var T=n.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())})),_=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"error",children:t})};return Object(i.jsxs)("div",{className:"main_div",children:[Object(i.jsx)("h1",{className:"header_div",children:"Phonebook"}),Object(i.jsx)(_,{message:y}),Object(i.jsx)(_,{message:P}),Object(i.jsx)(d,{newFilter:p,handleFilterChange:function(e){v(e.target.value)}}),Object(i.jsx)("h2",{className:"header_div",children:"Add a new contact"}),Object(i.jsx)(s,{addPerson:function(e){e.preventDefault();var t={name:j,number:m};n.find((function(e){return e.name===t.name}))?window.confirm("".concat(j," is already added to phonebook, \n      replace the old number with the new one?"))&&(t.id=n.find((function(e){return e.name===t.name})).id,h.update(t.id,t).then((function(e){b(""),x(""),S("Updated ".concat(e.name)),setTimeout((function(){S(null),window.location.reload()}),5e3)})).catch((function(e){A("Information of ".concat(t.name," has an issue.")),console.log(e),setTimeout((function(){A(null),window.location.reload()}),3e3)}))):h.create(t).then((function(e){console.log(e),c(n.concat(e)),b(""),x(""),S("Added ".concat(e.name)),setTimeout((function(){S(null),window.location.reload()}),5e3)})).catch((function(e){console.log(e.response.data),A(e.response.data.error),setTimeout((function(){A(null),window.location.reload()}),8e3)}))},newName:j,handleNameChange:function(e){b(e.target.value)},newNumber:m,handleNumberChange:function(e){x(e.target.value)}}),Object(i.jsx)("h2",{className:"header_div",children:"Contacts"}),Object(i.jsx)(l,{filterPersons:T,deleteContact:h.deleteContact})]})};a.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2b8b8e6e.chunk.js.map